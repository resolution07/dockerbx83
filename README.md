# Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ Bitrix

[![PHP 8.3](https://img.shields.io/badge/PHP-8.3-777BB4?logo=php)](https://php.net/)
[![MySQL 8.0](https://img.shields.io/badge/MySQL-8.0-4479A1?logo=mysql)](https://mysql.com/)
[![Nginx 1.20](https://img.shields.io/badge/Nginx-1.20-269539?logo=nginx)](https://nginx.org/)

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è Docker-—Å—Ä–µ–¥–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ **1–°-–ë–∏—Ç—Ä–∏–∫—Å** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PHP 8.3, Nginx –∏ MySQL 8.0.

## üì¶ –°–æ—Å—Ç–∞–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- **PHP 8.3 FPM** (–Ω–∞ –±–∞–∑–µ Alpine Linux)
- **Nginx 1.20** (–Ω–∞ –±–∞–∑–µ Alpine Linux)
- **MySQL 8.0**
- **Xdebug 3** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **Composer 2.8** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–ª–æ–≥–∏, healthchecks)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
   git clone https://github.com/resolution07/dockerbx83.git
   cd dockerbx83
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`

3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
   make build-up
   ```

4. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost
```

## üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º

### üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `make build` ‚Äî —Å–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–æ–≤ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞
- `make up` ‚Äî –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- `make build-up` ‚Äî —Å–±–æ—Ä–∫–∞ + –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
- `make down` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- `make reload` ‚Äî –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –±–µ–∑ downtime

### üêû –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏

- `make php-bash` ‚Äî –≤—Ö–æ–¥ –≤ PHP-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π bash)
- `docker-compose logs -f nginx` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Nginx –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- `docker-compose logs -f php-fpm` ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PHP-FPM –ª–æ–≥–æ–≤
- `make remove-logs` ‚Äî –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç sudo)

### ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

- `docker-compose restart nginx` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- `docker-compose ps` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- `docker-compose exec php-fpm composer update` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—á–µ—Ä–µ–∑ `.env`)

```ini
DB_USERNAME=bitrix
DB_PASSWORD=FB0pr297)R{Env@
DB_DATABASE=bitrix_db
```

### üìù –õ–æ–≥–∏

–õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö:

- `Nginx`: `docker/nginx/log/`
- `PHP-FPM`: `docker/php-fpm/log/`

### üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Alpine-–æ–±—Ä–∞–∑—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å
- –ì–æ—Ç–æ–≤—ã–µ health-—á–µ–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ .env-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏